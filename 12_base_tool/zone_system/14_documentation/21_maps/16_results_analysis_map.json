{
  "_comment": "Epoch Trading System - Module 10: Results Analysis Cell Map",
  "_version": "1.2",
  "_organization": "XIII Trading LLC",
  "_module": "10_results_analysis",
  "_description": "Cell mappings for backtest results analysis and export system",
  "_directory": "02_zone_system/10_results_analysis/",

  "input_worksheets": {
    "backtest": "backtest",
    "entry_events": "entry_events",
    "exit_events": "exit_events",
    "zone_results": "zone_results",
    "market_overview": "market_overview"
  },

  "outputs": {
    "json_export": "epoch_analysis_YYYY-MM-DD.json",
    "daily_summary": "YYYY-MM-DD_daily_summary.txt",
    "sqlite_database": "epoch_history.db"
  },

  "backtest_input": {
    "_description": "Trade log from Module 09 backtest",
    "_columns": "A-U",
    "columns": {
      "trade_id": "A",
      "date": "B",
      "ticker": "C",
      "model": "D",
      "zone_type": "E",
      "direction": "F",
      "zone_high": "G",
      "zone_low": "H",
      "entry_price": "I",
      "entry_time": "J",
      "stop_price": "K",
      "target_3r": "L",
      "target_calc": "M",
      "target_used": "N",
      "exit_price": "O",
      "exit_time": "P",
      "exit_reason": "Q",
      "pnl_dollars": "R",
      "pnl_r": "S",
      "risk": "T",
      "win": "U"
    }
  },

  "entry_events_input": {
    "_description": "Entry enrichment data from entry_events subsystem",
    "_columns": "A-AH",
    "key_columns": {
      "trade_id": "A",
      "entry_vwap": "B",
      "entry_vs_vwap": "C",
      "entry_sma9": "D",
      "entry_vs_sma9": "E",
      "entry_sma21": "F",
      "entry_vs_sma21": "G",
      "sma9_vs_sma21": "H",
      "entry_volume": "I",
      "avg_volume_5": "J",
      "volume_delta_pct": "K",
      "volume_trend": "L",
      "relative_volume": "M",
      "prior_bar_qual": "N",
      "vol_delta_class": "O",
      "vol_delta_value": "P",
      "m5_structure": "Q",
      "m15_structure": "R",
      "h1_structure": "S",
      "h4_structure": "T",
      "structure_align": "U",
      "dominant_struct": "V",
      "m5_last_break": "W",
      "m15_last_break": "X",
      "health_score": "Y",
      "health_max": "Z",
      "health_pct": "AA",
      "health_label": "AB",
      "vwap_aligned": "AC",
      "trend_aligned": "AD",
      "structure_aligned": "AE"
    }
  },

  "exit_events_input": {
    "_description": "Exit event tracking data from exit_events subsystem",
    "_columns": "A-R",
    "columns": {
      "trade_id": "A",
      "event_seq": "B",
      "event_time": "C",
      "bars_from_entry": "D",
      "bars_from_mfe": "E",
      "event_type": "F",
      "from_state": "G",
      "to_state": "H",
      "price_at_event": "I",
      "r_at_event": "J",
      "health_score": "K",
      "health_delta": "L",
      "vwap": "M",
      "sma9": "N",
      "sma21": "O",
      "volume": "P",
      "swing_high": "Q",
      "swing_low": "R"
    }
  },

  "json_export_structure": {
    "_description": "Structure of the full JSON export file",
    "sections": {
      "meta": {
        "fields": ["date", "generated_at", "epoch_version", "tickers_analyzed", "ticker_list"]
      },
      "market_context": {
        "fields": ["composite_direction", "h4_dominant", "alignment_score"]
      },
      "tier_summary": {
        "fields": ["total_zones", "by_tier", "t1_percentage", "t2_percentage", "t3_percentage", "tier_descriptions"]
      },
      "zone_analysis": {
        "_description": "Per-ticker breakdown of zones",
        "fields": ["primary_zone", "secondary_zone", "zone_boundaries", "tier", "confluence_factors"]
      },
      "trades": {
        "_description": "Array of trade objects",
        "fields": ["trade_id", "date", "ticker", "model", "zone_type", "direction", "zone_high", "zone_low", "entry_price", "entry_time", "stop_price", "target_3r", "target_calc", "target_used", "exit_price", "exit_time", "exit_reason", "pnl_dollars", "pnl_r", "risk", "is_winner"]
      },
      "no_trades": {
        "_description": "Zones with no signals"
      },
      "statistics": {
        "overall": ["total_trades", "wins", "losses", "win_rate", "gross_profit", "gross_loss", "net_pnl"],
        "r_based": ["total_r", "avg_win_r", "avg_loss_r", "expectancy"],
        "by_model": "EPCH1-4 breakdown",
        "by_exit_type": "STOP/TARGET_3R/TARGET_CALC/CHOCH/EOD breakdown",
        "by_direction": "LONG vs SHORT"
      },
      "entry_analysis": {
        "entries": "Dict of EntryEvent data by trade_id",
        "health_summary": ["avg_health_score", "min_health_score", "max_health_score", "by_label", "vwap_aligned_pct", "trend_aligned_pct", "structure_aligned_pct"]
      },
      "exit_events": {
        "fields": ["total_events", "trades_with_events", "events_by_trade"]
      },
      "optimal_trade_analysis": {
        "trades": "Dict of OptimalTrade data by trade_id",
        "efficiency_summary": ["avg_capture_efficiency", "avg_mfe_r", "avg_mae_r", "avg_optimal_r", "total_potential_r"]
      }
    }
  },

  "daily_summary_structure": {
    "_description": "Condensed summary for Claude chat (~2K tokens)",
    "sections": {
      "1": "PERFORMANCE OVERVIEW (trades, wins, losses, win rate, net R, expectancy)",
      "2": "BY MODEL (EPCH1-4 breakdown with indicators)",
      "3": "BY DIRECTION (LONG vs SHORT)",
      "4": "BY EXIT TYPE (STOP, TARGET_3R, TARGET_CALC, CHOCH, EOD)",
      "5": "CONFLUENCE IMPACT (VWAP, Trend, Structure aligned vs not)",
      "6": "CAPTURE EFFICIENCY (actual vs potential R)",
      "7": "TIMING ANALYSIS (performance by hour)",
      "8": "NOTABLE TRADES (top 3 best/worst)",
      "9": "FLAGS & QUESTIONS (auto-detected patterns)"
    }
  },

  "entry_model_definitions": {
    "EPCH1": {"zone_type": "PRIMARY", "entry_type": "Continuation", "description": "Price traverses through primary zone"},
    "EPCH2": {"zone_type": "PRIMARY", "entry_type": "Rejection", "description": "Price rejects from primary zone"},
    "EPCH3": {"zone_type": "SECONDARY", "entry_type": "Continuation", "description": "Price traverses through secondary zone"},
    "EPCH4": {"zone_type": "SECONDARY", "entry_type": "Rejection", "description": "Price rejects from secondary zone"}
  },

  "exit_type_definitions": {
    "STOP": "Hit zone-based stop ($0.05 buffer)",
    "TARGET_3R": "Hit 3R target",
    "TARGET_CALC": "Hit calculated target from Module 07",
    "CHOCH": "Change of Character (structure reversal)",
    "EOD": "End of day forced exit (15:50 ET)"
  },

  "tier_definitions": {
    "T1": "Highest quality zones (strong confluence)",
    "T2": "Moderate quality zones",
    "T3": "Lower quality zones (minimal confluence)"
  },

  "health_label_thresholds": {
    "STRONG": "5-7",
    "MODERATE": "3-4",
    "WEAK": "0-2"
  },

  "cli_options": {
    "--skip-polygon": "Skip Polygon API calls (faster)",
    "--copy": "Copy daily summary to clipboard",
    "--copy-json": "Copy full JSON to clipboard",
    "--date": "Override date (default: read from Excel)",
    "--report": "Show historical summary report",
    "--report-days": "Days for historical report (default: 30)",
    "--no-save": "Don't save files",
    "--no-db": "Don't save to SQLite database"
  },

  "trade_id_format": {
    "format": "{ticker}_{MMDDYY}_{model}_{HHMM}",
    "example": "LLY_121225_EPCH2_1450"
  }
}
