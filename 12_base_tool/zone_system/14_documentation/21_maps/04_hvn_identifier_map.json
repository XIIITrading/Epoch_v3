{
  "_comment": "Epoch Trading System - Module 04: HVN Identifier Cell Map",
  "_version": "1.1",
  "_organization": "XIII Trading LLC",
  "_module": "04_hvn_identifier",
  "_description": "Cell mappings for High Volume Node (HVN) Point of Control identification",
  "_directory": "02_zone_system/04_hvn_identifier/",
  "_version_notes": "V1.1: Input source corrected - start_date now read from market_overview S36:S45, not bar_data E59:E68",

  "worksheets": {
    "input": "market_overview",
    "output": "bar_data",
    "atr_source": "bar_data"
  },

  "market_overview_input": {
    "_description": "Input source: tickers and start_dates from market_overview ticker_structure",
    "_rows": "36-45",
    "columns": {
      "ticker": "C",
      "start_date": "S"
    },
    "rows": {
      "t1": {"ticker": "C36", "start_date": "S36"},
      "t2": {"ticker": "C37", "start_date": "S37"},
      "t3": {"ticker": "C38", "start_date": "S38"},
      "t4": {"ticker": "C39", "start_date": "S39"},
      "t5": {"ticker": "C40", "start_date": "S40"},
      "t6": {"ticker": "C41", "start_date": "S41"},
      "t7": {"ticker": "C42", "start_date": "S42"},
      "t8": {"ticker": "C43", "start_date": "S43"},
      "t9": {"ticker": "C44", "start_date": "S44"},
      "t10": {"ticker": "C45", "start_date": "S45"}
    }
  },

  "time_hvn_output": {
    "_description": "Output destination: bar_data time_hvn section",
    "_rows": "59-68",
    "columns": {
      "ticker_id": "B",
      "ticker": "C",
      "date": "D",
      "start_date": "E",
      "hvn_poc1": "F",
      "hvn_poc2": "G",
      "hvn_poc3": "H",
      "hvn_poc4": "I",
      "hvn_poc5": "J",
      "hvn_poc6": "K",
      "hvn_poc7": "L",
      "hvn_poc8": "M",
      "hvn_poc9": "N",
      "hvn_poc10": "O"
    },
    "rows": {
      "t1": 59,
      "t2": 60,
      "t3": 61,
      "t4": 62,
      "t5": 63,
      "t6": 64,
      "t7": 65,
      "t8": 66,
      "t9": 67,
      "t10": 68
    }
  },

  "atr_source": {
    "_description": "ATR values read from bar_data on_options_metrics section for overlap threshold",
    "_rows": "73-82",
    "columns": {
      "ticker_id": "B",
      "ticker": "C",
      "d1_atr": "T"
    },
    "rows": {
      "t1": 73,
      "t2": 74,
      "t3": 75,
      "t4": 76,
      "t5": 77,
      "t6": 78,
      "t7": 79,
      "t8": 80,
      "t9": 81,
      "t10": 82
    }
  },

  "algorithm_parameters": {
    "_description": "Configuration for HVN identification algorithm",
    "price_granularity": 0.01,
    "poc_count": 10,
    "overlap_atr_divisor": 2,
    "default_atr": 2.0,
    "chunk_size_days": 30,
    "include_pre_market": true,
    "include_post_market": true
  },

  "poc_ranking": {
    "_description": "POCs ranked by volume only (highest volume = poc1)",
    "poc1": "highest volume level",
    "poc2": "second highest (non-overlapping)",
    "poc3": "third highest (non-overlapping)",
    "poc10": "tenth highest (non-overlapping)",
    "overlap_threshold": "ATR / overlap_atr_divisor"
  },

  "data_flow": {
    "_description": "Complete data flow for HVN identification",
    "step_1": {
      "action": "Read ticker and start_date",
      "source": "market_overview",
      "cells": "C36:C45 (ticker), S36:S45 (start_date)"
    },
    "step_2": {
      "action": "Read ATR for overlap threshold",
      "source": "bar_data",
      "cells": "T73:T82 (d1_atr)"
    },
    "step_3": {
      "action": "Fetch 1-minute data from Polygon API",
      "source": "External API",
      "parameters": "ticker, start_date to current date"
    },
    "step_4": {
      "action": "Calculate volume profile and identify top 10 non-overlapping POCs",
      "algorithm": "price_granularity=0.01, overlap_threshold=ATR/2"
    },
    "step_5": {
      "action": "Write HVN POC results",
      "destination": "bar_data",
      "cells": "B59:O68 (ticker_id, ticker, date, start_date, hvn_poc1-10)"
    }
  },

  "cell_reference_examples": {
    "t1_input_ticker": "C36 (market_overview)",
    "t1_input_start_date": "S36 (market_overview)",
    "t1_output_ticker": "C59 (bar_data)",
    "t1_output_start_date": "E59 (bar_data)",
    "t1_hvn_poc1": "F59 (bar_data)",
    "t1_hvn_poc10": "O59 (bar_data)",
    "t1_d1_atr": "T73 (bar_data)",
    "t5_hvn_poc5": "J63 (bar_data)"
  }
}
